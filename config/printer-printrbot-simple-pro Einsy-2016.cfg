# This file contains common pin mappings for Einsy Rambo boards. To use
# this config, the firmware should be compiled for the AVR atmega2560.

# See the example.cfg file for a description of available parameters.

[stepper_x]
step_pin: PC0
dir_pin: PL0
enable_pin: !PA7
step_distance: .0125
endstop_pin: tmc2130_stepper_x:virtual_endstop
position_endstop: 0
position_max: 171
homing_speed: 50.0
homing_retract_dist: 0
homing_positive_dir: false

[tmc2130 stepper_x]
cs_pin: PG0
microsteps: 16
run_current: .8
sense_resistor: 0.220
diag1_pin: !PK2
driver_SGT: 10
interpolate: true

[stepper_y]
step_pin: PC1
dir_pin: PL1
enable_pin: !PA6
step_distance: .0125
endstop_pin: tmc2130_stepper_y:virtual_endstop
position_endstop: 220
position_max: 220
position_min: 0
homing_speed: 50.0
homing_retract_dist: 0
homing_positive_dir: true

[tmc2130 stepper_y]
cs_pin: PG2
microsteps: 16
run_current: .8
hold_current: .5
sense_resistor: 0.220
diag1_pin: !PK7
driver_SGT: 10

[stepper_z]
step_pin: PC2
dir_pin: PL2
enable_pin: !PA5
step_distance: .0025
endstop_pin: probe:z_virtual_endstop
position_max: 190
homing_positive_dir: false
homing_speed: 8
[homing_override]
set_position_z: 0
axes: z
gcode:
    G90   ; Uncomment these 2 lines to blindly lift the Z 2mm at start
    G1 Z2 F600
    G28 X0 Y0
    G1 X100 Y100 F3600
    G28 Z0

[probe]
x_offset: 20
z_offset: 1.95
pin: ^PB4
speed: 10

[bed_mesh]
horizontal_move_z: 0
samples: 1
sample_retract_dist: 2.0
min_point: 0,5
max_point: 150,200
probe_count: 3,3
#fade_start: 1.5
algorithm: bicubic
bicubic_tension: .2

[tmc2130 stepper_z]
cs_pin: PK5
microsteps: 16
run_current: .9
sense_resistor: 0.220
diag1_pin: !PK6
interpolate: true

[extruder]
step_pin: PC3
dir_pin: PL6
enable_pin: !PA4
step_distance: .00813
nozzle_diameter: 0.500
filament_diameter: 1.750
heater_pin: PE5
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF0
control: pid
pid_Kp: 22.2
pid_Ki: 1.08
pid_Kd: 114
min_temp: 0
max_temp: 250

[tmc2130 extruder]
cs_pin: PK4
microsteps: 16
run_current: .9
sense_resistor: 0.220
diag1_pin: !PK3
interpolate: true

[heater_bed]
heater_pin: PG5
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF2
control: watermark
min_temp: 0
max_temp: 130

[fan]
pin: PH5

[mcu]
serial: /dev/ttyACM0

[printer]
kinematics: cartesian
max_velocity: 400
max_accel: 3000
max_z_velocity: 10
max_z_accel: 100
square_corner_velocity: 5.0

[static_digital_output yellow_led]
pins: !PB7